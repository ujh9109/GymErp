<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="PtRegistrationMapper">

 	<!-- 전체 예약 목록 조회 -->
    <select id="getAllPtRegistration" resultType="com.example.gymerp.dto.PtRegistrationDto">
        SELECT 
            REGNUM,EMPNUM,MEMNUM,SHNUM,REGCREATED,REGTIME,
            LASTTIME,REGDATE,REGUPDATEDAT,REGNOTE
        FROM REGISTRATION
        ORDER BY REGNUM DESC
    </select>

    <!-- 단일 예약 조회 -->
    <select id="getPtRegistrationById" parameterType="int" resultType="com.example.gymerp.dto.PtRegistrationDto">
        SELECT 
            REGNUM,EMPNUM,MEMNUM,SHNUM,REGCREATED,
            REGTIME,LASTTIME,REGDATE,REGUPDATEDAT,REGNOTE
        FROM REGISTRATION
        WHERE REGNUM = #{regNum}
    </select>

    <!-- 예약 등록 -->
    <insert id="insertPtRegistration" parameterType="com.example.gymerp.dto.PtRegistrationDto">
        INSERT INTO REGISTRATION (
            REGNUM,EMPNUM,MEMNUM,SHNUM,REGCREATED,
            REGTIME,LASTTIME,REGDATE,REGUPDATEDAT,REGNOTE
        )
        VALUES (
            REGNUM.NEXTVAL,#{empNum},#{memNum},#{shNum},SYSTIMESTAMP,
            #{regTime},#{lastTime},#{regDate},SYSTIMESTAMP,#{regNote}
        )
    </insert>

    <!-- 예약 수정 -->
    <update id="updatePtRegistration" parameterType="com.example.gymerp.dto.PtRegistrationDto">
        UPDATE REGISTRATION
        SET 
            EMPNUM = #{empNum},
            MEMNUM = #{memNum},
            SHNUM = #{shNum},
            REGTIME = #{regTime},
            LASTTIME = #{lastTime},
            REGDATE = #{regDate},
            REGNOTE = #{regNote},
            REGUPDATEDAT = SYSTIMESTAMP
        WHERE REGNUM = #{regNum}
    </update>

    <!-- 예약 삭제 -->
    <delete id="deletePtRegistration" parameterType="int">
        DELETE FROM REGISTRATION
        WHERE REGNUM = #{regNum}
    </delete>
 </mapper>